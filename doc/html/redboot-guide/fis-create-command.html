<!-- Copyright (C) 2009 Free Software Foundation, Inc.                                -->
<!-- This material may be distributed only subject to the terms      -->
<!-- and conditions set forth in the Open Publication License, v1.0  -->
<!-- or later (the latest version is presently available at          -->
<!-- http://www.opencontent.org/openpub/).                           -->
<!-- Distribution of the work or derivative of the work in any       -->
<!-- standard (paper) book form is prohibited unless prior           -->
<!-- permission is obtained from the copyright holder.               -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>fis create</TITLE
><meta name="MSSmartTagsPreventParsing" content="TRUE">
<META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="RedBoot User's Guide"
HREF="redboot-guide.html"><LINK
REL="UP"
TITLE="Flash Image System (FIS)"
HREF="flash-image-system.html"><LINK
REL="PREVIOUS"
TITLE="fis free"
HREF="fis-free-command.html"><LINK
REL="NEXT"
TITLE="fis load"
HREF="fis-load-command.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>RedBoot User's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="fis-free-command.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="fis-load-command.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="FIS-CREATE-COMMAND"
></A
>fis create</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN1931"
></A
><H2
>Name</H2
>fis create&nbsp;--&nbsp;Create flash image</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN1934"
></A
><H2
>Synopsis</H2
><P
><B
CLASS="COMMAND"
>fis create</B
>  {-b <TT
CLASS="REPLACEABLE"
><I
> data address</I
></TT
>} {-l <TT
CLASS="REPLACEABLE"
><I
> length</I
></TT
>} [-f <TT
CLASS="REPLACEABLE"
><I
> flash address</I
></TT
>] [-e <TT
CLASS="REPLACEABLE"
><I
> entry</I
></TT
>] [-r <TT
CLASS="REPLACEABLE"
><I
> relocation address</I
></TT
>] [-s <TT
CLASS="REPLACEABLE"
><I
> data length</I
></TT
>] [-n ] [<TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN1952"
></A
><H2
>Arguments</H2
><DIV
CLASS="INFORMALTABLE"
><P
></P
><A
NAME="AEN1954"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
TITLE="C1"><COL
WIDTH="1*"
TITLE="C2"><COL
WIDTH="1*"
TITLE="C3"><COL
WIDTH="1*"
TITLE="C4"><THEAD
><TR
><TH
>Name</TH
><TH
>Type</TH
><TH
>Description</TH
><TH
>Default</TH
></TR
></THEAD
><TBODY
><TR
><TD
>-b</TD
><TD
>Number</TD
><TD
>Address of data to be written to the flash.</TD
><TD
>Address of last loaded file. If not set in a load
	      operation, it must be specified.</TD
></TR
><TR
><TD
>-l</TD
><TD
>Number</TD
><TD
>Length of flash area to occupy. If specified, and
	      the named image already exists, the length must match
	      the value in the FIS directory.</TD
><TD
>Length of area reserved in FIS directory if the
	      image already exists, or the length of the last loaded
	      file. If neither are set, it must be specified.</TD
></TR
><TR
><TD
>-f</TD
><TD
>Number</TD
><TD
>Address of flash area to occopy.</TD
><TD
>The address of an area reserved in the FIS
	      directory for extant images. Otherwise the first free block
	      which is large enough will be used.</TD
></TR
><TR
><TD
>-e</TD
><TD
>Number</TD
><TD
>Entry address for an executable image, used by
	      the <B
CLASS="COMMAND"
>fis load</B
> command.</TD
><TD
>The entry address of last loaded file.</TD
></TR
><TR
><TD
>-r</TD
><TD
>Number</TD
><TD
>Address where the image should be relocated to by
	      the <B
CLASS="COMMAND"
>fis load</B
> command. This is only
	      relevant for images that will be loaded with the
	      <B
CLASS="COMMAND"
>fis load</B
> command.</TD
><TD
>The load address of the last loaded file.</TD
></TR
><TR
><TD
>-s</TD
><TD
>Number</TD
><TD
>Actual length of data written to image. This is
	      used to control the range over which the checksum is
	      made.</TD
><TD
>It defaults to the length of the last loaded
	      file.</TD
></TR
><TR
><TD
>-n</TD
><TD
>&nbsp;</TD
><TD
>When set, no image data will be written to the
	      flash. Only the FIS directory will be updated.</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
></TD
><TD
>String</TD
><TD
>Name of flash image.</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN2011"
></A
><H2
>Description</H2
><P
>This command creates an image in the FIS directory. The data for the
image must exist in RAM memory before the copy. Typically, you would use the
RedBoot <B
CLASS="COMMAND"
>load</B
> command to load file into
RAM and then the <B
CLASS="COMMAND"
>fis create</B
> command to write
it to a flash image.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN2016"
></A
><H2
>Examples</H2
><P
>Trying to create an extant image, will require the action
      to be verified.
<TABLE
BORDER="5"
BGCOLOR="#E0E0F0"
WIDTH="70%"
><TR
><TD
><PRE
CLASS="SCREEN"
>RedBoot&#62; <KBD
CLASS="USERINPUT"
>fis create RedBoot -f 0xa0000000 -b 0x8c400000 -l 0x20000</KBD
>
An image named &#8216;RedBoot&#8217; exists - continue (y/n)? <KBD
CLASS="USERINPUT"
>n</KBD
></PRE
></TD
></TR
></TABLE
></P
><P
>Create a new test image, let the command find a suitable place.
<TABLE
BORDER="5"
BGCOLOR="#E0E0F0"
WIDTH="70%"
><TR
><TD
><PRE
CLASS="SCREEN"
>RedBoot&#62; <KBD
CLASS="USERINPUT"
>fis create junk -b 0x8c400000 -l 0x20000</KBD
>
... Erase from 0xa0040000-0xa0060000: .
... Program from 0x8c400000-0x8c420000 at 0xa0040000: .
... Erase from 0xa0fe0000-0xa1000000: .
... Program from 0x8c7d0000-0x8c7f0000 at 0xa0fe0000: .</PRE
></TD
></TR
></TABLE
></P
><P
>Update the RedBoot[RAM] image.
<TABLE
BORDER="5"
BGCOLOR="#E0E0F0"
WIDTH="70%"
><TR
><TD
><PRE
CLASS="SCREEN"
>RedBoot&#62; <KBD
CLASS="USERINPUT"
>load redboot_RAM.img</KBD
>
Entry point: 0x060213c0, address range: 0x06020000-0x06036cc0                   
RedBoot&#62; <KBD
CLASS="USERINPUT"
>fis create RedBoot[RAM]</KBD
>
No memory address set.
An image named 'RedBoot[RAM]' exists - continue (y/n)? <KBD
CLASS="USERINPUT"
>y</KBD
>
* CAUTION * about to program 'RedBoot[RAM]'
            at 0x00020000..0x00036cbf from 0x06020000 - continue (y/n)? <KBD
CLASS="USERINPUT"
>y</KBD
>
... Erase from 0x00020000-0x00040000: ..
... Program from 0x06020000-0x06036cc0 at 0x00020000: ..
... Erase from 0x00070000-0x00080000: .
... Program from 0x0606f000-0x0607f000 at 0x00070000: .</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="fis-free-command.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="redboot-guide.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="fis-load-command.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>fis free</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="flash-image-system.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>fis load</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>