<!-- Copyright (C) 2009 Free Software Foundation, Inc.                                -->
<!-- This material may be distributed only subject to the terms      -->
<!-- and conditions set forth in the Open Publication License, v1.0  -->
<!-- or later (the latest version is presently available at          -->
<!-- http://www.opencontent.org/openpub/).                           -->
<!-- Distribution of the work or derivative of the work in any       -->
<!-- standard (paper) book form is prohibited unless prior           -->
<!-- permission is obtained from the copyright holder.               -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>exec</TITLE
><meta name="MSSmartTagsPreventParsing" content="TRUE">
<META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="RedBoot User's Guide"
HREF="redboot-guide.html"><LINK
REL="UP"
TITLE="Executing Programs from RedBoot"
HREF="executing-programs.html"><LINK
REL="PREVIOUS"
TITLE="go"
HREF="go-command.html"><LINK
REL="NEXT"
TITLE="Rebuilding RedBoot"
HREF="rebuilding-redboot.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>RedBoot User's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="go-command.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="rebuilding-redboot.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="EXEC-COMMAND"
></A
>exec</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN2942"
></A
><H2
>Name</H2
>exec&nbsp;--&nbsp;Execute a Linux kernel</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN2945"
></A
><H2
>Synopsis</H2
><P
><B
CLASS="COMMAND"
>exec</B
>  [-w <TT
CLASS="REPLACEABLE"
><I
> timeout</I
></TT
>] [-r <TT
CLASS="REPLACEABLE"
><I
> ramdisk_address</I
></TT
>] [-s <TT
CLASS="REPLACEABLE"
><I
> ramdisk_length</I
></TT
>] [-b <TT
CLASS="REPLACEABLE"
><I
> load_address</I
></TT
>
   	    {-l <TT
CLASS="REPLACEABLE"
><I
> load_length</I
></TT
>}
        ] [-c <TT
CLASS="REPLACEABLE"
><I
> kernel_command_line</I
></TT
>] [<TT
CLASS="REPLACEABLE"
><I
> entry_point</I
></TT
>]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN2962"
></A
><H2
>Arguments</H2
><DIV
CLASS="INFORMALTABLE"
><P
></P
><A
NAME="AEN2964"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
TITLE="C1"><COL
WIDTH="1*"
TITLE="C2"><COL
WIDTH="1*"
TITLE="C3"><COL
WIDTH="1*"
TITLE="C4"><THEAD
><TR
><TH
>Name</TH
><TH
>Type</TH
><TH
>Description</TH
><TH
>Default</TH
></TR
></THEAD
><TBODY
><TR
><TD
>-w <TT
CLASS="REPLACEABLE"
><I
>timeout</I
></TT
></TD
><TD
>Number</TD
><TD
>Time to wait before starting execution.</TD
><TD
>0</TD
></TR
><TR
><TD
>-r <TT
CLASS="REPLACEABLE"
><I
>ramdisk_address</I
></TT
></TD
><TD
>Number</TD
><TD
>Address in memory of "initrd"-style ramdisk - passed to Linux kernel.</TD
><TD
><SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>None</I
></SPAN
></TD
></TR
><TR
><TD
>-s <TT
CLASS="REPLACEABLE"
><I
>ramdisk_length</I
></TT
></TD
><TD
>Number</TD
><TD
>Length of ramdisk image - passed to Linux kernel.</TD
><TD
><SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>None</I
></SPAN
></TD
></TR
><TR
><TD
>-b <TT
CLASS="REPLACEABLE"
><I
>load_address</I
></TT
></TD
><TD
>Number</TD
><TD
>Address in memory of the Linux kernel image.</TD
><TD
>Value set by <B
CLASS="COMMAND"
>load</B
> or <B
CLASS="COMMAND"
>fis load</B
></TD
></TR
><TR
><TD
>-l <TT
CLASS="REPLACEABLE"
><I
>load_length</I
></TT
></TD
><TD
>Number</TD
><TD
>Length of Linux kernel image.</TD
><TD
><SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>none</I
></SPAN
></TD
></TR
><TR
><TD
>-c <TT
CLASS="REPLACEABLE"
><I
>kernel_command_line</I
></TT
></TD
><TD
>String</TD
><TD
>Command line to pass to the Linux kernel.</TD
><TD
><SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>None</I
></SPAN
></TD
></TR
><TR
><TD
>-x</TD
><TD
>&nbsp;</TD
><TD
>Boot kernel with endianess opposite of RedBoot endianess.</TD
><TD
>Boot kernel with same endianess as RedBoot</TD
></TR
><TR
><TD
><TT
CLASS="REPLACEABLE"
><I
>entry_address</I
></TT
></TD
><TD
>Number</TD
><TD
>Starting address for Linux kernel execution</TD
><TD
>Implied by architecture</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN3030"
></A
><H2
>Description</H2
><P
>The <B
CLASS="COMMAND"
>exec</B
> command is used to execute a non-eCos application, typically a
Linux kernel. Additional information may be passed to the kernel at startup
time. This command is quite special (and unique from the <B
CLASS="COMMAND"
>go</B
> command) in
that the program being executed may expect certain environmental setups, for
example that the MMU is turned off, etc. </P
><P
>The Linux kernel expects to have been loaded to a particular memory
location which is architecture dependent(0xC0008000 in the case of the SA1110). 
Since this memory is  used
by RedBoot internally, it is not possible to load the kernel to that location
directly. Thus the requirement for the "-b" option which tells the command
where the kernel has been loaded. When the <B
CLASS="COMMAND"
>exec</B
> command runs, the image will
be relocated to the appropriate location before being started. The "-r" and
"-s" options are used to pass information to the kernel about where a statically
loaded ramdisk (initrd) is located.</P
><P
>The "-c" option can be used to pass textual "command line" information
to the kernel.  If the command line data contains any punctuation (spaces,
etc), then it must be quoted using the double-quote character '"'. If the
quote character is required, it should be written as '\"'.
      </P
><P
>The "-x" option is optionally available on some bi-endian platforms. It is used to boot
a kernel built with an endianess opposite of RedBoot.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN3039"
></A
><H2
>Examples</H2
><P
>Execute a Linux kernel, passing a command line, which needs relocation.
The result from RedBoot is normally quiet, with the target platform being
passed over to Linux immediately.
<TABLE
BORDER="5"
BGCOLOR="#E0E0F0"
WIDTH="70%"
><TR
><TD
><PRE
CLASS="SCREEN"
>RedBoot&#62; <KBD
CLASS="USERINPUT"
>exec -b 0x100000 -l 0x80000 -c "noinitrd root=/dev/mtdblock3 console=ttySA0"</KBD
></PRE
></TD
></TR
></TABLE
> 
      </P
><P
>Execute a Linux kernel, default entry address and no relocation required, with a timeout.  
The <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
> emphasized lines</I
></SPAN
> are output from the loaded kernel.
<TABLE
BORDER="5"
BGCOLOR="#E0E0F0"
WIDTH="70%"
><TR
><TD
><PRE
CLASS="SCREEN"
> 
RedBoot&#62; exec <KBD
CLASS="USERINPUT"
>-c "console=ttyS0,38400 ip=dhcp nfsroot=/export/elfs-sh" -w 5</KBD
>
Now booting linux kernel:
Base address 0x8c001000 Entry 0x8c210000
Cmdline : console=ttyS0,38400 ip=dhcp nfsroot=/export/elfs-sh
About to start execution at 0x8x210000 - abort with ^C within 5 seconds
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>Linux version 2.4.10-pre6 (...) (gcc version 3.1-stdsh-010931) #3 Thu Sep 27 11:04:23 BST 2001</I
></SPAN
></PRE
></TD
></TR
></TABLE
> 
      </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="go-command.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="redboot-guide.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="rebuilding-redboot.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>go</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="executing-programs.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Rebuilding RedBoot</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>